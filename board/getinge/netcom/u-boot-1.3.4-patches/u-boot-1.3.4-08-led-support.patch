Index: u-boot-1.3.4/board/atmel/at91sam9m10g45ek/led.c
===================================================================
--- u-boot-1.3.4.orig/board/atmel/at91sam9m10g45ek/led.c	2011-08-02 12:07:46.609375197 +0200
+++ u-boot-1.3.4/board/atmel/at91sam9m10g45ek/led.c	2011-08-02 13:10:04.339373296 +0200
@@ -28,27 +28,27 @@
 #include <asm/arch/gpio.h>
 #include <asm/arch/io.h>
 
-#define	RED_LED		AT91_PIN_PD31	/* this is the user1 led */
-#define	GREEN_LED	AT91_PIN_PD0	/* this is the user2 led */
+#define	CR17_LED	AT91_PIN_PE20
+#define CR19_LED        AT91_PIN_PE18
 
-void red_LED_on(void)
+void cr17_LED_on(void)
 {
-	at91_set_gpio_value(RED_LED, 1);
+	at91_set_gpio_value(CR17_LED, 0);
 }
 
-void red_LED_off(void)
+void cr17_LED_off(void)
 {
-	at91_set_gpio_value(RED_LED, 0);
+	at91_set_gpio_value(CR17_LED, 1);
 }
 
-void green_LED_on(void)
+void cr19_LED_on(void)
 {
-	at91_set_gpio_value(GREEN_LED, 0);
+	at91_set_gpio_value(CR19_LED, 0);
 }
 
-void green_LED_off(void)
+void cr19_LED_off(void)
 {
-	at91_set_gpio_value(GREEN_LED, 1);
+	at91_set_gpio_value(CR19_LED, 1);
 }
 
 void coloured_LED_init(void)
@@ -56,9 +56,6 @@
 	/* Enable clock */
 	at91_sys_write(AT91_PMC_PCER, 1 << AT91SAM9G45_ID_PIODE);
 
-	at91_set_gpio_output(RED_LED, 1);
-	at91_set_gpio_output(GREEN_LED, 1);
-
-	at91_set_gpio_value(RED_LED, 0);
-	at91_set_gpio_value(GREEN_LED, 1);
+	at91_set_gpio_output(CR17_LED, 0);
+	at91_set_gpio_output(CR19_LED, 1);
 }
Index: u-boot-1.3.4/common/Makefile
===================================================================
--- u-boot-1.3.4.orig/common/Makefile	2011-08-02 13:14:08.019373172 +0200
+++ u-boot-1.3.4/common/Makefile	2011-08-02 13:14:19.329373166 +0200
@@ -144,6 +144,7 @@
 COBJS-$(CONFIG_CMD_MFSL) += cmd_mfsl.o
 COBJS-$(CONFIG_MP) += cmd_mp.o
 COBJS-$(CONFIG_CMD_SF) += cmd_sf.o
+COBJS-y += cmd_led.o
 
 COBJS	:= $(COBJS-y)
 SRCS	:= $(AOBJS:.o=.S) $(COBJS:.o=.c)
Index: u-boot-1.3.4/common/cmd_led.c
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ u-boot-1.3.4/common/cmd_led.c	2011-08-02 13:24:53.929372843 +0200
@@ -0,0 +1,56 @@
+#include <common.h>
+
+void cr17_LED_on(void);
+void cr17_LED_off(void);
+void cr19_LED_on(void);
+void cr19_LED_off(void);
+
+static int do_led(cmd_tbl_t *cmdtp, int flag, int argc, char *argv[])
+{
+	const char *action;
+	const char *led;
+
+	/* need at least two arguments */
+	if (argc < 3)
+		goto usage;
+
+	action = argv[1];
+	led = argv[2];
+
+	if (! strcmp(led, "CR17")) {
+		if (! strcmp(action, "on"))
+			cr17_LED_on();
+		else if (! strcmp(action, "off"))
+			cr17_LED_off();
+		else {
+			printf("LED: action '%s' unknown\n", action);
+			goto usage;
+		}
+	}
+	else if (! strcmp(led, "CR19")) {
+		if (! strcmp(action, "on"))
+			cr19_LED_on();
+		else if (! strcmp(action, "off"))
+			cr19_LED_off();
+		else {
+			printf("LED: action '%s' unknown\n", action);
+			goto usage;
+		}
+	}
+	else {
+		printf("LED: led '%s' unknown\n", led);
+		goto usage;
+	}
+
+	return 0;
+
+usage:
+	printf("Usage:\n%s\n", cmdtp->usage);
+	return 1;
+}
+
+U_BOOT_CMD(
+	led,	3,	1,	do_led,
+	"led	- LED sub-system\n",
+	"on name\n"
+	"off name\n");

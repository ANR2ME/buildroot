--- linphone/console/shell.c	2009-04-27 22:23:41.000000000 +0800
+++ linphone.nommu/console/shell.c	2011-12-28 14:59:37.382047284 +0800
@@ -171,7 +171,11 @@
 	}
 	args[j++]=NULL;
 
+#ifdef __NOMMU__
+	pid = vfork();
+#else
 	pid = fork();
+#endif
 	if (pid < 0){
 		fprintf(stderr,"Could not fork\n");
 		exit(-1);
